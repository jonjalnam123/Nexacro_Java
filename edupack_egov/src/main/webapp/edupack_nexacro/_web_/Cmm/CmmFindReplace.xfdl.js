(function(){return function(){if(!this._is_form){return;}var _a=null;this.on_create=function(){this.set_name("CmmFindReplace");this.set_titletext("그리드 찾기/바꾸기");this.set_border("0px none");if(Form==this.constructor){this._setFormPosition(320,320);}_a=new Dataset("ds00",this);_a._setContents("<ColumnInfo><Column id=\"index\" type=\"STRING\" size=\"256\"/><Column id=\"name\" type=\"STRING\" size=\"256\"/><Column id=\"displaytype\" type=\"STRING\" size=\"256\"/><Column id=\"edittype\" type=\"STRING\" size=\"256\"/><Column id=\"body\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("dsDirection",this);_a._setContents("<ColumnInfo><Column id=\"code\" type=\"STRING\" size=\"256\"/><Column id=\"dataKO\" type=\"STRING\" size=\"256\"/><Column id=\"dataEN\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"code\">prev</Col><Col id=\"dataKO\">이전</Col><Col id=\"dataEN\">previous</Col></Row><Row><Col id=\"code\">next</Col><Col id=\"dataKO\">다음</Col><Col id=\"dataEN\">next</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("dsPosition",this);_a._setContents("<ColumnInfo><Column id=\"code\" type=\"STRING\" size=\"256\"/><Column id=\"dataKO\" type=\"STRING\" size=\"256\"/><Column id=\"dataEN\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"code\">current</Col><Col id=\"dataKO\">현재위치</Col><Col id=\"dataEN\">current</Col></Row><Row><Col id=\"code\">first</Col><Col id=\"dataKO\">처음부터</Col><Col id=\"dataEN\">first</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("dsCondition",this);_a._setContents("<ColumnInfo><Column id=\"code\" type=\"STRING\" size=\"256\"/><Column id=\"dataKO\" type=\"STRING\" size=\"256\"/><Column id=\"dataEN\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"code\">equal</Col><Col id=\"dataKO\">일치</Col><Col id=\"dataEN\">equal</Col></Row><Row><Col id=\"code\">inclusion</Col><Col id=\"dataKO\">포함</Col><Col id=\"dataEN\">inclusion</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new Static("sta00","10","20","120","30",null,null,null,null,null,null,this);_a.set_taborder("0");_a.set_text("대상칼럼");_a.getSetter("uWord").set("popup.targetcolumn");_a.set_cssclass("sta_WF_LabelTxt");this.addChild(_a.name,_a);_a=new Combo("cbo00","sta00:-7","20",null,"30","20",null,null,null,null,null,this);_a.set_taborder("1");_a.set_innerdataset("ds00");_a.set_codecolumn("index");_a.set_datacolumn("name");_a.set_text("cbo00");this.addChild(_a.name,_a);_a=new Static("sta01","10","55","120","30",null,null,null,null,null,null,this);_a.set_taborder("2");_a.set_text("찾을 문자열");_a.getSetter("uWord").set("popup.findstring");_a.set_cssclass("sta_WF_LabelTxt");this.addChild(_a.name,_a);_a=new Static("sta02","10","90","120","30",null,null,null,null,null,null,this);_a.set_taborder("4");_a.set_text("바꿀 문자열");_a.getSetter("uWord").set("popup.replacestring");_a.set_cssclass("sta_WF_LabelTxt");this.addChild(_a.name,_a);_a=new Static("sta03","10","125","120","30",null,null,null,null,null,null,this);_a.set_taborder("6");_a.set_text("찾을 방향");_a.getSetter("uWord").set("popup.finddirection");_a.set_cssclass("sta_WF_LabelTxt");this.addChild(_a.name,_a);_a=new Radio("rdo00","sta03:-7","125",null,"30","20",null,null,null,null,null,this);_a.set_taborder("7");_a.set_direction("vertical");_a.set_innerdataset("dsDirection");_a.set_codecolumn("code");_a.set_datacolumn("dataKO");_a.set_text("");_a.set_value("prev");_a.set_index("0");this.addChild(_a.name,_a);_a=new Static("sta04","10","160","120","30",null,null,null,null,null,null,this);_a.set_taborder("8");_a.set_text("찾을 위치");_a.getSetter("uWord").set("popup.findposition");_a.set_cssclass("sta_WF_LabelTxt");this.addChild(_a.name,_a);_a=new Radio("rdo01","sta04:-7","160",null,"30","20",null,null,null,null,null,this);_a.set_taborder("9");_a.set_direction("vertical");_a.set_innerdataset("dsPosition");_a.set_codecolumn("code");_a.set_datacolumn("dataKO");_a.set_value("current");_a.set_index("0");this.addChild(_a.name,_a);_a=new Static("sta05","10","195","120","30",null,null,null,null,null,null,this);_a.set_taborder("10");_a.set_text("찾을 조건");_a.getSetter("uWord").set("popup.findcondition");_a.set_cssclass("sta_WF_LabelTxt");this.addChild(_a.name,_a);_a=new Radio("rdo02","sta05:-7","195",null,"30","20",null,null,null,null,null,this);_a.set_taborder("11");_a.set_direction("vertical");_a.set_innerdataset("dsCondition");_a.set_codecolumn("code");_a.set_datacolumn("dataKO");_a.set_value("equal");_a.set_index("0");this.addChild(_a.name,_a);_a=new CheckBox("chk00","123","230",null,"30","15",null,null,null,null,null,this);_a.set_taborder("12");_a.set_text("대/소문자구분");_a.getSetter("uWord").set("popup.casesensitive");this.addChild(_a.name,_a);_a=new Button("btn00","13","280","70","30",null,null,null,null,null,null,this);_a.set_taborder("13");_a.set_text("찾기");_a.getSetter("uWord").set("popup.find");this.addChild(_a.name,_a);_a=new Button("btn01","88","280","70","30",null,null,null,null,null,null,this);_a.set_taborder("14");_a.set_text("바꾸기");_a.getSetter("uWord").set("popup.replace");this.addChild(_a.name,_a);_a=new Button("btn02","163","280","70","30",null,null,null,null,null,null,this);_a.set_taborder("15");_a.set_text("모두바꾸기");_a.getSetter("uWord").set("popup.allchange");this.addChild(_a.name,_a);_a=new Button("btn03","238","280","70","30",null,null,null,null,null,null,this);_a.set_taborder("16");_a.set_text("닫기");_a.getSetter("uWord").set("popup.close");this.addChild(_a.name,_a);_a=new Edit("edt00","sta01:-7","55",null,"30","20",null,null,null,null,null,this);_a.set_taborder("3");this.addChild(_a.name,_a);_a=new Edit("edt01","sta02:-7","90",null,"30","20",null,null,null,null,null,this);_a.set_taborder("5");this.addChild(_a.name,_a);_a=new Layout("default","",320,320,this,function(_b){});_a.set_mobileorientation("landscape");this.addLayout(_a.name,_a);};this.loadPreloadList=function(){};this.registerScript("CmmFindReplace.xfdl",function(){this.fvGrid="";this.fvDs="";this.fvSelectRow=0;this.fvCellname="";this.fvCellindex=0;this.fvSelectType="cell";this.form_onload=function(_a,_b){this.gfnFormOnLoad(this);var _c=nexacro.getEnvironmentVariable("evLanguage");var _d="data"+_c;this.rdo00.set_datacolumn(_d);this.rdo01.set_datacolumn(_d);this.rdo02.set_datacolumn(_d);this.fvGrid=this.getOwnerFrame().pvGrid;this.fvDs=this.fvGrid.getBindDataset();this.fvSelectRow=this.getOwnerFrame().pvStrartRow;this.fvSelectType=this.getOwnerFrame().pvSelectType;this.fvCellindex=this.getOwnerFrame().pvSelectCell;this.fvGrid.set_selecttype("cell");var _e=this._gfnGridUserHeaderFlg(this.fvGrid);if(!_e){this.fnGetHeadText();}else{this.fnGetUserHeader(this.fvGrid);}};this.fnGetUserHeader=function(_b){this.ds00.clearData();var _c=_b.getCellCount("head");for(var _i=0;_i<_c;_i++ ){var _d=_b.getCellProperty("head",_i,"calendarweekformat");if(this.gfnIsNull(_d)){continue;}for(var _j=0;_j<_b.getCellCount("body");_j++ ){var _e=0;if(_d==_b.getCellProperty("body",_j,"text")){_e=_j;var _f=_b.getCellProperty("body",_e,"text");var _g=this.ds00.addRow();this.ds00.setColumn(_g,"body",_f);this.ds00.setColumn(_g,"index",_j);this.ds00.setColumn(_g,"displaytype",_b.getCellProperty("body",_j,"displaytype"));this.ds00.setColumn(_g,"edittype",_b.getCellProperty("body",_j,"edittype"));this.ds00.setColumn(_g,"name",_b.getCellProperty("head",_i,"text"));}}}var _h=this.ds00.findRow("index",this.fvGrid.currentcell);if(_h> -1){this.cbo00.set_value(this.ds00.getColumn(_h,"index"));}else{this.cbo00.set_index(0);}this.fvCellindex=this.cbo00.value;this.fnSetBtnInfo();};this.fnGetHeadText=function(){this.ds00.clearData();for(var _i=0;_i<this.fvGrid.getCellCount("body");_i++ ){if(this.fvGrid.getCellProperty("body",_i,"displaytype")!="image"){var _b=this.fvGrid.getCellProperty("body",_i,"text");if(_b=="bind:gridCmmcheck"){continue;}var _c;if(!this.gfnIsNull(_b)){_c=_b.substr(0,5);}else{_c="";}if(_c=="bind:"){var _d=this.ds00.addRow();this.ds00.setColumn(_d,"body",this.fvGrid.getCellProperty("body",_i,"text"));this.ds00.setColumn(_d,"displaytype",this.fvGrid.getCellProperty("body",_i,"displaytype"));this.ds00.setColumn(_d,"edittype",this.fvGrid.getCellProperty("body",_i,"edittype"));this.ds00.setColumn(_d,"index",_i);}}}for(var _j=0;_j<this.fvGrid.getCellCount("Head");_j++ ){var _e=this.fvGrid.getCellProperty("Head",_j,"text");var _f=this.fvGrid.getCellProperty("Head",_j,"col");var _g=this.fvGrid.getCellProperty("body",_j,"text");var _d=this.ds00.findRow("body",_g);if(_d!= -1){this.ds00.setColumn(_d,"name",_e);}}var _h=this.ds00.findRow("index",this.fvCellindex);if(_h> -1){this.cbo00.set_value(this.ds00.getColumn(_h,"index"));}else{this.cbo00.set_index(0);}this.fvCellindex=this.cbo00.value;this.fnSetBtnInfo();};this.fnGetFindOption=function(){var _b={'direction':this.rdo00.value,'position':this.rdo01.value,'scope':'col','condition':this.rdo02.value,'strict':this.chk00.value,'cell':this.cbo00.value};return _b;};this.fnCheckType=function(_b){var _c=["normal","text","calendarcontrol","date","editcontrol","number","text","textareacontrol"];for(var _d=0;_d<_c.length;_d++ ){if(_c[_d]==_b){return true;}}return false;};this.replaceText=function(_b){var _c=this.edt00.value;if(this.gfnIsNull(_c)){return;}var _d=this.fvGrid;var _e=this.fnGetFindOption();var _f=this.edt01.value;if(this.gfnIsNull(_f)){_f="";}var _g=this.gfnReplaceGridText(_d,_c,_f,_e,_b);var _h=_g.length;if(_h>0){var _i;var _j=0;for(var _k=0;_k<_h;_k++ ){_i=_g[_k];if(_i.replace){_j+=1;}}if(_b){if(_h==_j){this.markGridFindResult(_d,_d._lastReplaceRow,_e.cell);this.setFocus();this.gfnAlert("msg.action.success","","success");}else{this.gfnAlert("msg.action.fail","","error");}}else{if(_j==0){this.gfnAlert("msg.search.nodata","","nodata");return;}findRowCell=this.gfnFindGridText(_d,_c,_e);findRow=findRowCell[0];findCell=findRowCell[1];if(findRow> -1&&findCell> -1){this.markGridFindResult(_d,findRow,findCell);}else{this.markGridFindResult(_d,_d.lastReplaceRow,_e.cell);}this.setFocus();}}else{this.gfnAlert("msg.search.nodata","","nodata");}};this.markGridFindResult=function(_b,_c,_d){var _e=this.fvDs;_e.set_rowposition(_c);_b.setCellPos(_d);};this.fnSetBtnInfo=function(){var _b=this.fvGrid.getCellProperty("body",this.fvCellindex,"displaytype");if(!this.fnCheckType(_b)){this.btn01.set_enable(false);this.btn02.set_enable(false);}else{this.btn01.set_enable(true);this.btn02.set_enable(true);}};this.btn03_onclick=function(_a,_b){this.fvGrid.set_selecttype(this.fvSelectType);this.close();};this.btn00_onclick=function(_a,_b){var _c=this.edt00.value;var _d=this.fnGetFindOption();var _e=this.gfnFindGridText(this.fvGrid,_c,_d);var _f=_e[0];var _g=_e[1];if(_f> -1&&_g> -1){this.fvDs.set_rowposition(_f);this.fvGrid.setCellPos(_g);}else{this.gfnAlert("msg.search.nodata","","nodata");}};this.cbo00_onitemchanged=function(_a,_b){this.fvCellindex=_b.postvalue;this.fnSetBtnInfo();};this.btn01_onclick=function(_a,_b){this.replaceText(false);};this.btn02_onclick=function(_a,_b){this.replaceText(true);};});this.on_initEvent=function(){this.addEventHandler("onload",this.form_onload,this);this.cbo00.addEventHandler("onitemchanged",this.cbo00_onitemchanged,this);this.btn00.addEventHandler("onclick",this.btn00_onclick,this);this.btn01.addEventHandler("onclick",this.btn01_onclick,this);this.btn02.addEventHandler("onclick",this.btn02_onclick,this);this.btn03.addEventHandler("onclick",this.btn03_onclick,this);};this.loadIncludeScript("CmmFindReplace.xfdl");this.loadPreloadList();_a=null;};})();