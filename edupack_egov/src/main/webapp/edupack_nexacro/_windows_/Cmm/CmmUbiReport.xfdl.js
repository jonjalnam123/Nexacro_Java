(function(){return function(){if(!this._is_form){return;}var _a=null;this.on_create=function(){this.set_name("CmmUbiReport");this.set_titletext("Ubi Report Preview");this.getSetter("classname").set("UbiReport");if(Form==this.constructor){this._setFormPosition(1024,730);}_a=new UbiReport("UbiViewer","1","1",null,null,"1","1",null,null,null,null,this);_a.set_taborder("0");_a.set_text("UbiViewer");this.addChild(_a.name,_a);_a=new Layout("default","",this._adjust_width,this._adjust_height,this,function(_b){});this.addLayout(_a.name,_a);};this.loadPreloadList=function(){};this.registerScript("CmmUbiReport.xfdl",function(){var _b=this.gfnGetServerUrl();this.UbiViewer.key=getRandomKey();this.UbiViewer.ubiserverurl=_b+"/UbiServer";this.UbiViewer.resource=_b+"/ubi4/js";this.UbiViewer.reporturl=_b+"/ubi4/work/";this.UbiViewer.resid="UBIHTML";this.UbiViewer.scale="-9999";this.UbiViewer.datasource="Tutorial";this.UbiReport_onload=function(_a,_c){if(""+this.parent.parent=="[object Form]"){var _d=this.parent.parent.ubiIsRuntime;var _e=this.parent.parent.ubiReportFile;var _f=this.parent.parent.ubiSvcUrl;var _g=this.parent.parent.ubiLocalDs;var _h=this.parent.parent.ubiGridObj;var _i=this.parent.parent.ubiArg;}else{var _d=this.parent.ubiIsRuntime;var _e=this.parent.ubiReportFile;var _f=this.parent.ubiSvcUrl;var _g=this.parent.ubiLocalDs;var _h=this.parent.ubiGridObj;var _i=this.parent.ubiArg;}if(_e==undefined){return;}this.UbiViewer.jrffile=_e;this.UbiViewer.arg=_i;if(_d==true){var _j=_h.getFormatRowCount();var _k=_h.getFormatColCount();var _l=new Array;var _m=new Array;var _n="230.230.230";var _o="240.240.240";var _p=0;var _q=0;var _r=0;var _s=0;var _t="";var _u="";var _v=0;var _w=0;for(_p=0;_p<_j;_p++ ){_t=_h.getFormatRowProperty(_p,"band");if(_t==_u){_s++ ;}else{_s=0;}_m[_p]=_h.getRealRowSize(_p,_s,false);_u=_t;}for(_p=0;_p<_k;_p++ ){_l[_p]=_h.getRealColSize(_p);}var _x=0;var _y=0;var _z=this.UbiViewer.getDesignDataset(this);_u="";var _aa=0;var _ab=0;var _ac=0;var _ad=0;var _ae=0;var _af=0;var _ag=0;var _ah=0;var _ai=0;var _aj=0;var _ak="";_ab=_z.addRow();_z.setColumn(_ab,"type","widths");_z.setColumn(_ab,"text",_l);_ab=_z.addRow();_z.setColumn(_ab,"type","heights");_z.setColumn(_ab,"text",_m);for(_p=0;_p<_j;_p++ ){_t=_h.getFormatRowProperty(_p,"band");if(_t!=_u){if(_t=="head"){_aa= -1;_ak=_n;}else if(_t=="body"){_aa=0;_ak="";}else if(_t=="summ"){_aa= -2;_ak=_o;}_x=_h.getCellCount(_t);for(_q=0;_q<_x;_q++ ){_ac=_h.getCellProperty(_t,_q,"row");_ad=_h.getCellProperty(_t,_q,"col");_af=_h.getCellProperty(_t,_q,"rowspan");_ae=_h.getCellProperty(_t,_q,"colspan");_ab=_z.addRow();_z.setColumn(_ab,"type",_t);_z.setColumn(_ab,"row",_ac);_z.setColumn(_ab,"col",_ad);_z.setColumn(_ab,"rowspan",_af);_z.setColumn(_ab,"colspan",_ae);_z.setColumn(_ab,"align",_h.getCellProperty(_t,_q,"align"));if(_aa!=0){_z.setColumn(_ab,"text",_h.getCellText(_aa,_q));}_z.setColumn(_ab,"bgcolor",_ak);_z.setColumn(_ab,"leftmargin","3");_z.setColumn(_ab,"rightmargin","3");}}_u=_t;}this.addChild(_z.name,_z);_x=_h.getCellCount("Body");_y=_h.rowcount;var _al=new Dataset("dsGrid",this);this.addChild(_al.name,_al);for(_p=0;_p<_x;_p++ ){_al.addColumn("column"+_p,"string");}for(_q=0;_q<_y;_q++ ){_al.addRow();for(_r=0;_r<_x;_r++ ){_al.setColumn(_q,_r,_h.getCellText(_q,_r));}}this.UbiViewer.setRuntimeData(_z,_al);this.removeChild(_z.name);this.removeChild(_al.name);this.UbiViewer.retrieve(this,"UbiPreviewEnd");}else{this.UbiViewer.runtimedata="";if(_f!=null){for(var _p=0;_p<_f.length;_p++ ){var _am=_f[_p];if(_am.length>7){this.UbiViewer.addTransaction2(_am[7],_am[0],_am[1],_am[2],_am[3],_am[4],_am[5],_am[6]);}else{this.UbiViewer.addTransaction(_am[6],_am[0],_am[1],_am[2],_am[3],_am[4],_am[5]);}}}else if(_g!=null){for(var _p=0;_p<_g.length;_p++ ){var _am=_g[_p];this.UbiViewer.setDataset(_am[0],_am[1]);}}this.UbiViewer.retrieve(this,"UbiPreviewEnd");}};this.UbiPreviewEnd=function(){var _c=50;try{if(_c<=this.UbiViewer.getTotalPage()){this.UbiViewer.setEnableToolbar("PRINT_PDF",false);this.UbiViewer.setEnableToolbar("PRINT_HTML",false);this.UbiViewer.setEnableToolbar("PRINT_UBI",true);this.UbiViewer.setPluginProgress("true");}else{this.UbiViewer.setEnableToolbar("PRINT_PDF",true);this.UbiViewer.setEnableToolbar("PRINT_HTML",true);this.UbiViewer.setEnableToolbar("PRINT_UBI",false);this.UbiViewer.setPluginProgress("false");}}catch(e){}};this.UbiPrintEnd=function(_c){};this.UbiExportEnd=function(_c,_d){};this.UbiLinkButtonDown=function(_c,_d){};this.replaceAll=function(_c,_d,_e){return _c.split(_d).join(_e);};function getRandomKey(){var _c="";var _d=new Date();var _e=_d.getFullYear();var _f=_d.getMonth()+1;var _g=_d.getDate();var _h=_d.getHours();var _i=_d.getMinutes();var _j=_d.getSeconds();var _k=_d.getMilliseconds();if((""+_f).length==1){_f="0"+_f;}if((""+_g).length==1){_g="0"+_g;}if((""+_h).length==1){_h="0"+_h;}if((""+_i).length==1){_i="0"+_i;}if((""+_j).length==1){_j="0"+_j;}_c=(''+_e+_f+_g+_h+_i+_j+_k)+'_'+((Math.random()* (1<<30)).toString(16).replace('.',''));return _c;}});this.on_initEvent=function(){this.addEventHandler("onload",this.UbiReport_onload,this);};this.loadIncludeScript("CmmUbiReport.xfdl");this.loadPreloadList();_a=null;};})();